<p-toast />
<div class="activate-warranty">
    <div class="banner">
        <img src="assets/image/banner/banner.png" alt="" />
    </div>
    <div class="container">
        <div class="back">
            <span>
                <i class="pi pi-arrow-left"></i>
            </span>
            <span [routerLink]="'/activate-warranty'">Quay lại</span>
        </div>
        <div class="title">
            <h1>KÍCH HOẠT BẢO HÀNH TRỰC TUYẾN</h1>
            <h1 class="title-success">BẠN ĐÃ KÍCH HOẠT BẢO HÀNH THÀNH CÔNG</h1>
            <h1 class="info-customer">THÔNG TIN KHÁCH HÀNG</h1>
        </div>
        <div class="grid p-fluid mt-2">
            <div class="col-12 md:col-12">
                <div class="field grid">
                    <div
                        class="col-12 mb-2 md:col-5 md:mb-0"
                        style="font-weight: 500"
                    >
                        Họ tên khách hàng:
                    </div>
                    <div
                        class="col-12 mb-2 md:col-7 md:mb-0 flex justify-content-start"
                    >
                        {{ warrantyById[0]?.cusSuccess?.name }}
                    </div>
                </div>
                <div class="field grid">
                    <div
                        class="col-12 mb-2 md:col-5 md:mb-0"
                        style="font-weight: 500"
                    >
                        Số điện thoại:
                    </div>
                    <div
                        class="col-12 mb-2 md:col-7 md:mb-0 flex justify-content-start"
                    >
                        {{ warrantyById[0]?.cusSuccess?.phoneNumber }}
                    </div>
                </div>
                <div class="field grid">
                    <div
                        class="col-12 mb-2 md:col-5 md:mb-0"
                        style="font-weight: 500"
                    >
                        Địa chỉ:
                    </div>
                    <div
                        class="col-12 mb-2 md:col-7 md:mb-0 flex justify-content-start"
                    >
                        <ng-container
                            *ngIf="
                                warrantyById[0]?.cusSuccess?.wardName ||
                                    warrantyById[0]?.cusSuccess.addressDetail ||
                                    warrantyById[0]?.cusSuccess?.districtName ||
                                    warrantyById[0]?.cusSuccess?.cityName;
                                else noInfo
                            "
                        >
                            {{ warrantyById[0]?.cusSuccess?.addressDetail }},
                            {{ warrantyById[0]?.cusSuccess?.wardName }},
                            {{ warrantyById[0]?.cusSuccess?.districtName }},
                            {{ warrantyById[0]?.cusSuccess?.cityName }}
                        </ng-container>
                        <ng-template #noInfo> Chưa có thông tin </ng-template>
                    </div>
                </div>
            </div>
        </div>
       
        <div class="mt-3">
            <div class="icon-file" (click)="exportPDF()">
                <i style="font-size: 1.5rem; padding: 15px 10px;" class="pi pi-file-pdf"></i>
                <label style="font-weight: 600; padding-bottom: 10px; cursor: pointer; margin-top: 18px;" for="">Xuất file PDF</label>
            </div>
            <p-table [value]="warrantyById">
                <ng-template pTemplate="header">
                    <tr>
                        <th>Mã SP</th>
                        <th>Thông tin sản phẩm</th>
                        <th>Hạn bảo hành</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-product>
                    <tr>
                        <td>{{ product?.warrantyProducts[0].productId }}</td>
                        <td>
                            <div class="flex flex-column">
                                <span>
                                    {{
                                        product?.warrantyProducts[0]
                                            ?.productName
                                    }}
                                    {{
                                        product?.warrantyProducts[0]
                                            ?.productVariantName
                                    }}
                                </span>
                                <span style="font-size: 13px"
                                    ><strong>Số Serial:</strong>
                                    {{ product?.productCode }}</span
                                >
                            </div>
                        </td>
                        <td>
                            {{
                                product?.warrantyProducts[0].expirationDate
                                    | date : "dd/MM/yyyy HH:mm:ss"
                            }}
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
        <div class="flex gap-2 mt-5">
            <button
                pButton
                pRipple
                (click)="warrantyRequest()"
                type="button"
                label="Tạo yêu cầu bảo hành"
                class="flex-1"
            ></button>
        </div>

       
    <footer class="footer">
        <h1>THÔNG TIN CHUNG</h1>
        <h1 class="name-company">CÔNG TY TNHH TMDV & XNK TIẾN LINH</h1>
        <span>Địa chỉ: Mễ Hạ, Yên Phú, Yên Mỹ, Hưng Yên</span>
        <span>Email: tienlinhgroups&#64;gmail.com</span>
        <span>SĐT:0973952732 - 0915317043</span>
    </footer>
</div>

<div class="transfer-note" id="transferNote" style="display: none;">
    <div class="header">
      <div style="display: flex;" class="company-info">
        <img style="padding: 10px;" src="assets/image/logo/logo.png" alt="logo">
        <div style="padding: 28px 10px;">
          <h4 style="font-size: 14px;">CÔNG TY TNHH THƯƠNG MẠI DỊCH VỤ VÀ XUẤT KHẨU TIẾN LINH</h4>
          <p style="padding: 10px 0; font-size: 14px;">ĐC: Yên phú - Yên Mỹ - Hưng Yên</p>
        </div>
      </div>
    </div>
    <div class="transfer-code">
      <p style="font-style: italic; font-weight: 600; font-size: 16px; padding-right: 40px;">Mã Kích hoạt: {{ warrantyById[0]?.code || "" }}</p>
    </div>

    <h3 style="text-align: center;">PHIẾU KÍCH HOẠT</h3>

    <div class="details">
      <div class="content-transfer">
        <p>Chi nhánh: {{ warrantyById[0]?.branchName || "" }}</p>
        <p>Ngày kích hoạt: {{ currentDate }}</p>
      </div>
      <div style="margin-left: 50px;" class="content-transfer">
        <p>Khách hàng: {{ warrantyById[0]?.cusSuccess?.name || "" }}</p>
        <p>SĐT: {{ warrantyById[0]?.phoneNumber || "" }}</p>
        <p>Địa chỉ: {{ warrantyById[0]?.cusSuccess?.addressDetail || "" }}</p>
      </div>
    </div>
    

    <h4 style="padding: 0 30px;">Danh sách sản phẩm</h4>

    <div style="padding: 0 30px;">
      <table class="orders-table">
        <thead>
          <tr>
            <th style="width: 5%;">#</th>
            <th style="width: 15%;">Tên sản phẩm</th>
            <th style="width: 12%;">Số serial</th>
            <th style="width: 10%;">Bảo hành</th>
            <th style="width: 10%;">Ngày hết hạn</th>
          </tr>
        </thead>
        <tbody>
        
        </tbody>
      </table>
    </div>
</div>
