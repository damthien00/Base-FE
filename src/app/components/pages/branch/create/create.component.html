<p-dialog
    [(visible)]="displayModal"
    modal="true"
    [closable]="false"
    [draggable]="false"
    [resizable]="false"
    [style]="{ width: '50vw' }"
>
    <!-- Header -->
    <ng-template pTemplate="header">
        <h4>Thêm chi nhánh</h4>
    </ng-template>

    <!-- Body -->
    <ng-template pTemplate="content">
        <form [formGroup]="createBranchForm" (ngSubmit)="onSubmit()">
            <div class="grid p-fluid">
                <div class="col-12 md:col-6">
                    <div class="field mb-0">
                        <label htmlFor="name1"
                            >Tên chi nhánh<span class="red-asterisk"
                                >*</span
                            ></label
                        >
                        <input
                            pInputText
                            id="name1"
                            type="text"
                            spellcheck="false"
                            placeholder="Nhập tên chi nhánh"
                            formControlName="branch_name"
                        />
                        <div
                            *ngIf="
                                createBranchForm.get('branch_name')?.invalid &&
                                (createBranchForm.get('branch_name')?.dirty ||
                                    createBranchForm.get('branch_name')
                                        ?.touched)
                            "
                        >
                            <div
                                *ngIf="createBranchForm.get('branch_name')?.errors?.['required']"
                                class="error-message"
                            >
                                Vui lòng nhập tên chi nhánh
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12 md:col-6">
                    <div class="field mb-0">
                        <label htmlFor="phone_number"
                            >Số điện thoại<span class="red-asterisk"
                                >*</span
                            ></label
                        >
                        <input
                            pInputText
                            id="phone_number"
                            type="text"
                            spellcheck="false"
                            placeholder="Nhập số điện thoại"
                            formControlName="phone_number"
                        />
                        <div
                            *ngIf="
                                createBranchForm.get('phone_number')?.invalid &&
                                (createBranchForm.get('phone_number')?.dirty ||
                                    createBranchForm.get('phone_number')
                                        ?.touched)
                            "
                        >
                            <div
                                *ngIf="createBranchForm.get('phone_number')?.errors?.['required']"
                                class="error-message"
                            >
                                Vui lòng nhập số điện thoại chi nhánh
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12 md:col-6">
                    <div class="field mb-0">
                        <label htmlFor="email"
                            >Email<span class="red-asterisk">*</span></label
                        >
                        <input
                            pInputText
                            id="email"
                            type="text"
                            spellcheck="false"
                            placeholder="Nhập email"
                            formControlName="email"
                        />

                        <div
                            *ngIf="
                                createBranchForm.get('email')?.invalid &&
                                (createBranchForm.get('email')?.dirty ||
                                    createBranchForm.get('email')?.touched)
                            "
                        >
                            <div
                                *ngIf="createBranchForm.get('email')?.errors?.['required']"
                                class="error-message"
                            >
                                Vui lòng nhập email
                            </div>

                            <div
                                *ngIf="
                                    form
                                        .get('email')
                                        ?.hasError('invalidEmail') &&
                                    form.get('email')?.touched
                                "
                                class="error-message"
                            >
                                Email không hợp lệ.
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12 md:col-6">
                    <div class="field mb-0">
                        <label htmlFor="address"
                            >Địa chỉ<span class="red-asterisk">*</span></label
                        >
                        <input
                            pInputText
                            id="address"
                            type="text"
                            spellcheck="false"
                            placeholder="Nhập địa chỉ"
                            formControlName="address"
                        />
                        <div
                            *ngIf="
                                createBranchForm.get('address')?.invalid &&
                                (createBranchForm.get('address')?.dirty ||
                                    createBranchForm.get('address')?.touched)
                            "
                        >
                            <div
                                *ngIf="createBranchForm.get('address')?.errors?.['required']"
                                class="error-message"
                            >
                                Vui lòng nhập địa chỉ chi nhánh
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12 md:col-6">
                    <div class="field mb-0">
                        <label htmlFor="address"
                            >Khu vực<span class="red-asterisk">*</span></label
                        >
                        <p-dropdown
                            [options]="countries"
                            [(ngModel)]="selectedCountry"
                            optionLabel="name"
                            [filter]="true"
                            formControlName="ward"
                            filterBy="name"
                            [showClear]="true"
                            placeholder="Select a Country"
                        >
                            <ng-template
                                pTemplate="selectedItem"
                                let-selectedOption
                            >
                                <div class="flex align-items-center gap-2">
                                    <div>{{ selectedOption?.name }}</div>
                                </div>
                            </ng-template>
                            <ng-template let-country pTemplate="item">
                                <div class="flex align-items-center gap-2">
                                    <div>{{ country.name }}</div>
                                </div>
                            </ng-template>
                        </p-dropdown>
                        <div
                            *ngIf="
                                createBranchForm.get('address')?.invalid &&
                                (createBranchForm.get('address')?.dirty ||
                                    createBranchForm.get('address')?.touched)
                            "
                        >
                            <div
                                *ngIf="createBranchForm.get('address')?.errors?.['required']"
                                class="error-message"
                            >
                                Vui lòng nhập tên chính sách bảo hành
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12 md:col-6">
                    <div class="field mb-0">
                        <label htmlFor="address"
                            >Phường xã<span class="red-asterisk">*</span></label
                        >
                        <p-dropdown
                            [options]="countries"
                            [(ngModel)]="selectedCountry"
                            optionLabel="name"
                            [filter]="true"
                            formControlName="ward"
                            filterBy="name"
                            [showClear]="true"
                            placeholder="Select a Country"
                        >
                            <ng-template
                                pTemplate="selectedItem"
                                let-selectedOption
                            >
                                <div class="flex align-items-center gap-2">
                                    <div>{{ selectedOption?.name }}</div>
                                </div>
                            </ng-template>
                            <ng-template let-country pTemplate="item">
                                <div class="flex align-items-center gap-2">
                                    <div>{{ country.name }}</div>
                                </div>
                            </ng-template>
                        </p-dropdown>
                        <div
                            *ngIf="
                                createBranchForm.get('address')?.invalid &&
                                (createBranchForm.get('address')?.dirty ||
                                    createBranchForm.get('address')?.touched)
                            "
                        >
                            <div
                                *ngIf="createBranchForm.get('address')?.errors?.['required']"
                                class="error-message"
                            >
                                Vui lòng nhập tên chính sách bảo hành
                            </div>
                        </div>
                    </div>
                </div>
                <!-- <div class="col-12 md:col-6">
                    <div class="field mb-0 flex align-items-center gap-2"></div>
                </div> -->
                <div class="col-12 md:col-6">
                    <div class="field mb-0 flex align-items-center gap-2">
                        <p-inputSwitch [(ngModel)]="valSwitch"></p-inputSwitch>
                        <label htmlFor="address">Hoạt động</label>
                        <!-- <p-inputSwitch [(ngModel)]="checked" /> -->
                    </div>
                </div>
            </div>
        </form>
    </ng-template>

    <!-- Footer -->
    <ng-template pTemplate="footer">
        <div class="flex gap-2 justify-content-end">
            <button
                pButton
                pRipple
                type="button"
                label="Hủy"
                icon="pi pi-times"
                (click)="displayModal = false"
                class="p-button-danger"
            ></button>
            <button
                type="submit"
                pButton
                label="Lưu"
                icon="pi pi-check"
                class="p-button-primary"
            ></button>
        </div>
    </ng-template>
</p-dialog>
